<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QIJI</title>
</head>
<style>
    * {
        box-sizing: border-box;
        padding: 0;
        margin: 0;
    }

    .root {
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .container {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .footer {
        display: flex;
        align-items: center;
        height: 48px;
        line-height: 48px;
    }
</style>

<body>
    <div class="root">
        <div class="container">
            <h1>网站建设中...</h1>
            <h1>第一次测试</h1>
            <h1>第二次测试</h1>
            <h1>测试为新建image的情况</h1>
            <h1>测试为新建image的情况</h1>
        </div>
        <footer class="footer">
            <a href="https://beian.miit.gov.cn/" target="_blank">豫ICP备2023016923号</a>
            <img src="https://www.beian.gov.cn/img/new/gongan.png" alt="" style="margin-left: 8px;">
            <a target="_blank" href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41910902000172">
                豫公网安备41910902000172号
            </a>
        </footer>
    </div>
</body>

</html>

我想根据git仓库的commit来自动化构建docker镜像并把这个新的镜像退到dockerhub上面，请给我一份github的action的配置文件，并给每一行的配置加一下注释，标注这是什么作用，注释用中文。下面我会把我的真实场景告诉你，我仓库中有多个目录，其中一个为server目录，我需要监听server目录下的文件改动，一下所有逻辑都是基于server目录下有文件改动，server目录中有一个service目录，里面是各个微服务的代码，比如有server/service/a、server/service/b等等多个个微服务，server下面还有一些公共的目录，比如server/common、server/utils等等多个公共目录，我的需求是，只有当a或b微服务目录下的代码有改动时，我才构建对应目录下的代码为docker镜像并推送，如果没有改动就不构建。如果server/common
或
server/util目录下的有改动，则构建a和b等等所有微服务，公共目录和service微服务的构建逻辑一次提交只能跑一次，因为公共的修改会构建全部，再次构建微服务a、b等等会重复。还有每次更改需要基于现有的版本进行加1，版本号加1的规则是，如果是master分支就加主版本号，develop分支就加副版本号，其他分支则加次版本号。如果远端image没有，就从0.0.0开始，应对第一次push的情况。我还需要把构建的镜像版本号打印出来，方便我本次更改对应的版本号是多少。如果是公共代码修改则需要打印出所有镜像修改后的对应最新的版本号，请给我你的答案